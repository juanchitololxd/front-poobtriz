"use strict";(self.webpackChunkFront_web=self.webpackChunkFront_web||[]).push([[771],{1771:(B,_,a)=>{a.r(_),a.d(_,{LobbyModule:()=>g});var s=a(6895),h=a(5861),C=a(3905),x=a(3560),T=a(2340),e=a(8256),y=a(529);class d{constructor(o){this.http=o,this.baseUrl=T.N.lobby}joinLobby(o){var n=this;return(0,h.Z)(function*(){return yield(0,C.z)(n.http.get(`${n.baseUrl}/lobbies/${o}`)).then(i=>i).catch(i=>{console.log(i)})})()}crearLobby(o,n){var i=this;return(0,h.Z)(function*(){let r=x.Z.instanceEmptyLobby(o,12,8,1e3,n);return yield(0,C.z)(i.http.post(`${i.baseUrl}lobbies`,r)).then(l=>l).catch(l=>{console.log(l)})})()}}d.\u0275fac=function(o){return new(o||d)(e.LFG(y.eN))},d.\u0275prov=e.Yz7({token:d,factory:d.\u0275fac,providedIn:"root"});var m=a(241),M=a(7186),v=a(4235);function Z(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"img",6),e.NdJ("error",function(r){e.CHM(n);const l=e.oxw(2);return e.KtG(l.imageError(r))}),e.qZA()}if(2&t){const n=e.oxw(2);e.Q6J("src",n.image,e.LSH)}}function k(t,o){if(1&t&&e._UZ(0,"span",8),2&t){const n=e.oxw(3);e.Tol(n.icon),e.Q6J("ngClass","p-chip-icon")}}function F(t,o){if(1&t&&e.YNc(0,k,1,3,"span",7),2&t){const n=e.oxw(2);e.Q6J("ngIf",n.icon)}}function I(t,o){if(1&t&&(e.TgZ(0,"div",9),e._uU(1),e.qZA()),2&t){const n=e.oxw(2);e.xp6(1),e.Oqu(n.label)}}function O(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"span",10),e.NdJ("click",function(r){e.CHM(n);const l=e.oxw(2);return e.KtG(l.close(r))})("keydown.enter",function(r){e.CHM(n);const l=e.oxw(2);return e.KtG(l.close(r))}),e.qZA()}if(2&t){const n=e.oxw(2);e.Tol(n.removeIcon),e.Q6J("ngClass","pi-chip-remove-icon")}}function P(t,o){if(1&t&&(e.TgZ(0,"div",1),e.Hsn(1),e.YNc(2,Z,1,1,"img",2),e.YNc(3,F,1,1,"ng-template",null,3,e.W1O),e.YNc(5,I,2,1,"div",4),e.YNc(6,O,1,3,"span",5),e.qZA()),2&t){const n=e.MAs(4),i=e.oxw();e.Tol(i.styleClass),e.Q6J("ngClass",i.containerClass())("ngStyle",i.style),e.xp6(2),e.Q6J("ngIf",i.image)("ngIfElse",n),e.xp6(3),e.Q6J("ngIf",i.label),e.xp6(1),e.Q6J("ngIf",i.removable)}}const S=["*"];let J=(()=>{class t{constructor(){this.removeIcon="pi pi-times-circle",this.onRemove=new e.vpe,this.onImageError=new e.vpe,this.visible=!0}containerClass(){return{"p-chip p-component":!0,"p-chip-image":null!=this.image}}close(n){this.visible=!1,this.onRemove.emit(n)}imageError(n){this.onImageError.emit(n)}}return t.\u0275fac=function(n){return new(n||t)},t.\u0275cmp=e.Xpm({type:t,selectors:[["p-chip"]],hostAttrs:[1,"p-element"],inputs:{label:"label",icon:"icon",image:"image",style:"style",styleClass:"styleClass",removable:"removable",removeIcon:"removeIcon"},outputs:{onRemove:"onRemove",onImageError:"onImageError"},ngContentSelectors:S,decls:1,vars:1,consts:[[3,"ngClass","class","ngStyle",4,"ngIf"],[3,"ngClass","ngStyle"],[3,"src","error",4,"ngIf","ngIfElse"],["iconTemplate",""],["class","p-chip-text",4,"ngIf"],["tabindex","0",3,"class","ngClass","click","keydown.enter",4,"ngIf"],[3,"src","error"],[3,"class","ngClass",4,"ngIf"],[3,"ngClass"],[1,"p-chip-text"],["tabindex","0",3,"ngClass","click","keydown.enter"]],template:function(n,i){1&n&&(e.F$t(),e.YNc(0,P,7,8,"div",0)),2&n&&e.Q6J("ngIf",i.visible)},dependencies:[s.mk,s.O5,s.PC],styles:[".p-chip{display:inline-flex;align-items:center}.p-chip-text,.p-chip-icon.pi{line-height:1.5}.pi-chip-remove-icon{line-height:1.5;cursor:pointer}.p-chip img{border-radius:50%}\n"],encapsulation:2,changeDetection:0}),t})(),w=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez]}),t})();function L(t,o){1&t&&e._UZ(0,"p-chip",6),2&t&&e.Q6J("label",o.$implicit.nick)}function A(t,o){if(1&t){const n=e.EpF();e.TgZ(0,"body")(1,"div",2)(2,"h1"),e._uU(3,"Tu c\xf3digo de partida es:"),e.qZA(),e.TgZ(4,"p"),e._uU(5),e.qZA(),e.TgZ(6,"h3"),e._uU(7,"Jugadores:"),e.qZA(),e.TgZ(8,"div",3),e.YNc(9,L,1,1,"p-chip",4),e.qZA(),e.TgZ(10,"button",5),e.NdJ("click",function(){e.CHM(n);const r=e.oxw();return e.KtG(r.comenzarPartida())}),e._uU(11,"Comenzar"),e.qZA()()()}if(2&t){const n=e.oxw();e.xp6(5),e.Oqu(n.codigoPartida),e.xp6(4),e.Q6J("ngForOf",n.lobby.players)}}class u{constructor(o,n,i){this._router=o,this._activatedRoute=n,this._gatewayService=i,this.usuarios=[]}ngOnInit(){this._activatedRoute.params.subscribe(o=>{this.codigoPartida=o.id;let n=this._gatewayService.getAvailableServer(+this.codigoPartida);console.log(n),this.ws=new M.WebsocketBuilder(`${n}lobby/${localStorage.getItem("nick")}/${this.codigoPartida}`).onMessage((i,r)=>this.lobby=JSON.parse(r.data)).onClose((i,r)=>this.comenzarPartida()).build()})}comenzarPartida(){this._router.navigateByUrl(`/game/${this.codigoPartida}`)}ngOnDestroy(){this.ws.close()}}u.\u0275fac=function(o){return new(o||u)(e.Y36(m.F0),e.Y36(m.gz),e.Y36(v.J))},u.\u0275cmp=e.Xpm({type:u,selectors:[["app-lobby"]],decls:6,vars:1,consts:[["charset","UTF-8"],[4,"ngIf"],[1,"container"],[1,"inline"],[3,"label",4,"ngFor","ngForOf"],[3,"click"],[3,"label"]],template:function(o,n){1&o&&(e.TgZ(0,"html")(1,"head"),e._UZ(2,"meta",0),e.TgZ(3,"title"),e._uU(4,"Partida en Linea"),e.qZA()(),e.YNc(5,A,12,2,"body",1),e.qZA()),2&o&&(e.xp6(5),e.Q6J("ngIf",n.lobby))},dependencies:[s.sg,s.O5,J],styles:["body[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;background-image:linear-gradient(to bottom,#ff0000,#ff9999);animation:_ngcontent-%COMP%_cambiarFondo 10s linear infinite}@keyframes _ngcontent-%COMP%_cambiarFondo{0%{background-image:linear-gradient(to bottom,#e100ff,#e799ff)}50%{background-image:linear-gradient(to bottom,#ff9999,#99ccff)}to{background-image:linear-gradient(to bottom,#f79b33,#e6c66f)}}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}h1[_ngcontent-%COMP%]{font-size:4rem;margin-bottom:2rem;color:#000;text-shadow:2px 2px 4px rgba(0,0,0,.3)}p[_ngcontent-%COMP%]{font-size:6rem;margin-bottom:2rem;color:#070707;text-shadow:2px 2px 4px rgba(0,0,0,.3)}button[_ngcontent-%COMP%]{background-image:linear-gradient(#3c20dd,#14a2da);color:#fff;border:none;padding:1rem 2rem;font-size:1.5rem;border-radius:.5rem;cursor:pointer;transition:background-image .3s ease}button[_ngcontent-%COMP%]:hover{background-image:linear-gradient(#14a2da,#3c20dd)}.inline[_ngcontent-%COMP%]{display:flex;margin-bottom:40px}.inline[_ngcontent-%COMP%] > *[_ngcontent-%COMP%]{margin-inline:20px}"]});var c=a(433);class f{constructor(o,n,i){this.lobbyService=o,this.router=n,this.route=i,this.addBot=!1}ngOnInit(){this.route.queryParams.forEach(o=>{this.addBot=!(!o||"1"!=o.bot)})}crearPartida(){this.lobbyService.crearLobby(this.nombrePartida,this.addBot).then(o=>{o&&(localStorage.setItem("nick",this.nombrePartida),this.router.navigate(["/lobby/"+o?.codigo]))})}}f.\u0275fac=function(o){return new(o||f)(e.Y36(d),e.Y36(m.F0),e.Y36(m.gz))},f.\u0275cmp=e.Xpm({type:f,selectors:[["app-form-create-lobby"]],decls:15,vars:1,consts:[["charset","UTF-8"],[1,"container"],[1,"form"],["for","nickname"],["type","text","id","nick","name","nick",3,"ngModel","ngModelChange"],[3,"click"]],template:function(o,n){1&o&&(e.TgZ(0,"html")(1,"head"),e._UZ(2,"meta",0),e.TgZ(3,"title"),e._uU(4,"Creando partida"),e.qZA()(),e.TgZ(5,"body")(6,"div",1)(7,"h1"),e._uU(8,"Creando partida"),e.qZA(),e.TgZ(9,"div",2)(10,"label",3),e._uU(11,"Coloque nick:"),e.qZA(),e.TgZ(12,"input",4),e.NdJ("ngModelChange",function(r){return n.nombrePartida=r}),e.qZA(),e.TgZ(13,"button",5),e.NdJ("click",function(){return n.crearPartida()}),e._uU(14,"Crear"),e.qZA()()()()()),2&o&&(e.xp6(12),e.Q6J("ngModel",n.nombrePartida))},dependencies:[c.Fj,c.JJ,c.On],styles:["body[_ngcontent-%COMP%]{background-image:url(/assets/juego1.jpg);background-size:cover;background-position:center center;background-repeat:no-repeat}.container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:2rem;color:#070707;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2rem;background-color:#fffc;border-radius:1rem;box-shadow:0 .5rem 1rem #00000026}label[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}input[type=text][_ngcontent-%COMP%]{width:100%;padding:1rem;font-size:1.5rem;border:2px solid #ccc;border-radius:.5rem;margin-bottom:2rem}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:1rem 2rem;font-size:1.5rem;border-radius:.5rem;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#3e8e41}"]});var z=a(6173);class b{constructor(o,n){this.lobbyService=o,this.router=n}onSubmit(){this.lobbyService.joinLobby(this.codigo).then(o=>{o?(localStorage.setItem("nick",this.nick),this.router.navigate(["/lobby",o.codigo])):alert("Error al unirse a la sala")})}}b.\u0275fac=function(o){return new(o||b)(e.Y36(d),e.Y36(m.F0))},b.\u0275cmp=e.Xpm({type:b,selectors:[["app-form-connect-lobby-component"]],decls:13,vars:2,consts:[[1,"container"],[1,"form"],[3,"ngSubmit"],["for","codigo"],["type","number","name","codigo","required","",3,"ngModel","ngModelChange"],["for","nick"],["type","text","name","nick","required","",3,"ngModel","ngModelChange"],["type","submit"]],template:function(o,n){1&o&&(e.TgZ(0,"div",0)(1,"h1"),e._uU(2,"Ingresando a partida"),e.qZA(),e.TgZ(3,"div",1)(4,"form",2),e.NdJ("ngSubmit",function(){return n.onSubmit()}),e.TgZ(5,"label",3),e._uU(6,"C\xf3digo de la sala:"),e.qZA(),e.TgZ(7,"input",4),e.NdJ("ngModelChange",function(r){return n.codigo=r}),e.qZA(),e.TgZ(8,"label",5),e._uU(9,"Tu nick:"),e.qZA(),e.TgZ(10,"input",6),e.NdJ("ngModelChange",function(r){return n.nick=r}),e.qZA(),e.TgZ(11,"button",7),e._uU(12,"Unirme"),e.qZA()()()()),2&o&&(e.xp6(7),e.Q6J("ngModel",n.codigo),e.xp6(3),e.Q6J("ngModel",n.nick))},dependencies:[c._Y,c.Fj,c.wV,c.JJ,c.JL,c.Q7,c.On,c.F],styles:[".container[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;height:100vh;background-image:url(/assets/juego1.jpg);background-size:cover;background-position:center center;background-repeat:no-repeat}h1[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:2rem;color:#070707;text-shadow:2px 2px 4px rgba(0,0,0,.3)}.form[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:center;align-items:center;padding:2rem;background-color:#fffc;border-radius:1rem;box-shadow:0 .5rem 1rem #00000026}label[_ngcontent-%COMP%]{font-size:1.5rem;margin-bottom:1rem}input[_ngcontent-%COMP%]{width:100%;padding:1rem;font-size:1.5rem;border:2px solid #ccc;border-radius:.5rem;margin-bottom:2rem}button[_ngcontent-%COMP%]{background-color:#4caf50;color:#fff;border:none;padding:1rem 2rem;font-size:1.5rem;border-radius:.5rem;cursor:pointer;transition:background-color .3s ease}button[_ngcontent-%COMP%]:hover{background-color:#3e8e41}"]});class p{}p.\u0275fac=function(o){return new(o||p)},p.\u0275mod=e.oAB({type:p}),p.\u0275inj=e.cJS({imports:[m.Bz.forChild([{path:"create",component:f},{path:"connect",component:b},{path:":id",component:u,canActivate:[z.V]}]),m.Bz]});var U=a(4466),E=a(805);let q=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[s.ez,E.m8]}),t})();class g{}g.\u0275fac=function(o){return new(o||g)},g.\u0275mod=e.oAB({type:g}),g.\u0275inj=e.cJS({providers:[d,v.J],imports:[s.ez,p,U.m,y.JF,q,w]})}}]);